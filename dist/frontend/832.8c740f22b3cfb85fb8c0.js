(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[832],{1832:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LibModule:()=>w});var i=n(8583),o=n(4763),a=n(3705),r=n(665),l=n(3018),d=n(4212),s=n(7181);let c=(()=>{class e{constructor(e,t,n,i){this.logger=e,this.router=t,this.fb=n,this.libAuthService=i,this.libRegisterForm=this.fb.group({username:["",[r.kI.minLength(3),r.kI.pattern("[a-zA-Z0-9_]*")]],password:["",r.kI.minLength(5)],confirmPassword:["",r.kI.minLength(5)],email:["",[r.kI.email,r.kI.required]],role:["",r.kI.required],firstName:[""],lastName:[""],phoneNumber:[""]})}ngOnInit(){var e;e=document.querySelectorAll(".needs-validation"),Array.prototype.slice.call(e).forEach(function(e){e.addEventListener("submit",function(t){e.checkValidity()||(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")},!1)})}libRegister(){const e=this.libRegisterForm.value;e.confirmPassword===e.password?this.libAuthService.register(e).subscribe(t=>{if(!t)return this.logger.warn(`Username ${e.username} exists, register lib failed`),window.alert("The username already exist, please choose another one."),null;this.logger.info(`${e.role} ${t.username} already successfully registered in system.`),window.alert(`Success registered ${e.role} ${e.username}`),this.router.navigateByUrl("/lib/admin-portal")}):window.alert("Passwords are not matched, please check")}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(d.Kf),l.Y36(o.F0),l.Y36(r.qu),l.Y36(s.n))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-lib-register"]],decls:43,vars:1,consts:[[1,"register","text-center"],[1,"logo-img"],["src","/assets/media/pic/library_logo.png",1,"mb-4"],[1,"register-heading"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row","register-form"],[1,"col-md-6"],[1,"form-group"],["type","text","placeholder","Username *","formControlName","username","required","","minlength","3",1,"form-control"],[1,"invalid-feedback"],["type","password","placeholder","Password *","formControlName","password","required","","minlength","5",1,"form-control"],["type","password","placeholder","Confirm Password *","formControlName","confirmPassword","required","","minlength","5",1,"form-control"],["formControlName","role","required","",1,"form-control"],["value","","selected","","disabled","",1,"hidden"],["type","email","placeholder","Your Email *","formControlName","email","value","","required","",1,"form-control"],["type","text","placeholder","First Name","formControlName","firstName",1,"form-control"],["type","text","placeholder","Last Name","formControlName","lastName",1,"form-control"],["type","text","formControlName","phoneNumber","placeholder","Phone Number",1,"form-control"],["type","submit","value","Register",1,"btnRegister"],[1,"home-link"],["href","/lib/admin-portal"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._UZ(2,"img",2),l.qZA(),l.TgZ(3,"h2",3),l._uU(4,"Librarian/Admin Registration Form"),l.qZA(),l.TgZ(5,"form",4),l.NdJ("ngSubmit",function(){return t.libRegisterForm.valid&&t.libRegister()}),l.TgZ(6,"div",5),l.TgZ(7,"div",6),l.TgZ(8,"div",7),l._UZ(9,"input",8),l.TgZ(10,"div",9),l._uU(11," Username must have 3 chars or more, start with letter/number/'_' "),l.qZA(),l.qZA(),l.TgZ(12,"div",7),l._UZ(13,"input",10),l.TgZ(14,"div",9),l._uU(15," Password length must be 5 or longer. "),l.qZA(),l.qZA(),l.TgZ(16,"div",7),l._UZ(17,"input",11),l.qZA(),l.TgZ(18,"div",7),l.TgZ(19,"select",12),l.TgZ(20,"option",13),l._uU(21,"Please select role *"),l.qZA(),l.TgZ(22,"option"),l._uU(23,"Librarian"),l.qZA(),l.TgZ(24,"option"),l._uU(25,"Admin"),l.qZA(),l.qZA(),l.TgZ(26,"div",9),l._uU(27," Please select role input. "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(28,"div",6),l.TgZ(29,"div",7),l._UZ(30,"input",14),l.TgZ(31,"div",9),l._uU(32," Please provide valid email address. "),l.qZA(),l.qZA(),l.TgZ(33,"div",7),l._UZ(34,"input",15),l.qZA(),l.TgZ(35,"div",7),l._UZ(36,"input",16),l.qZA(),l.TgZ(37,"div",7),l._UZ(38,"input",17),l.qZA(),l._UZ(39,"input",18),l.TgZ(40,"div",19),l.TgZ(41,"a",20),l._uU(42,"Return Admin Portal"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(5),l.Q6J("formGroup",t.libRegisterForm))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,r.wO,r.EJ,r.YN,r.Kr],styles:[".register[_ngcontent-%COMP%]{background:#fff;max-width:80%;margin:auto;padding:3%}.logo-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{text-align:center;width:120px;height:150px}.register-heading[_ngcontent-%COMP%]{margin-top:-2%;font-size:x-large;color:#495057}.register[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]{padding:2%}input.form-control[_ngcontent-%COMP%], select.form-control[_ngcontent-%COMP%]{margin-top:12px}.gender-item[_ngcontent-%COMP%]{text-align:left;padding-top:12px;font-size:medium}label.radio[_ngcontent-%COMP%]{padding-left:10px}.btnRegister[_ngcontent-%COMP%]{float:right;margin-top:10%;margin-right:3%;border:none;border-radius:1.5rem;padding:2%;background:#87cefa;color:#fff;font-size:medium;font-weight:600;width:30%;cursor:pointer}.btnRegister[_ngcontent-%COMP%]:hover{color:blue}.home-link[_ngcontent-%COMP%]{text-align:right;margin-top:130px;margin-right:3%;font-size:large}"]}),e})();var g=n(7090),m=n(4403),p=n(2451);let Z=(()=>{class e{constructor(e,t,n,i,o,a,l){this.fb=e,this.router=t,this.libAuthService=n,this.adminAuthService=i,this.tokenStorageService=o,this.commonService=a,this.logger=l,this.libLoginForm=this.fb.group({username:["",r.kI.required],password:["",r.kI.required],role:["Librarian",r.kI.required]})}ngOnInit(){}libLogin(){const e=this.libLoginForm.value;e.username&&e.password&&("Librarian"===e.role?this.libAuthService.signIn(e.username,e.password).subscribe(t=>{t?(this.logger.info(`Librarian ${e.username} success logged in.`),this.tokenStorageService.saveToken(t,`$L_${e.username}`),this.commonService.setSubject(e.username),this.router.navigateByUrl(this.libAuthService.redirectUrl?this.libAuthService.redirectUrl:"/lib/lib-portal")):(this.logger.warn("Role mismatch, librarian login failed."),window.alert("User does not have librarian authentication, login failed"))}):"Admin"===e.role&&this.adminAuthService.signIn(e.username,e.password).subscribe(t=>{t?(this.logger.info(`Admin ${e.username} success logged in.`),this.tokenStorageService.saveToken(t,`$A_${e.username}`),this.commonService.setSubject(e.username),this.router.navigateByUrl(this.adminAuthService.redirectUrl?this.adminAuthService.redirectUrl:"/lib/admin-portal")):(this.logger.warn("Role mismatch, admin login failed."),window.alert("User does not have admin authentication, login failed"))}))}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(r.qu),l.Y36(o.F0),l.Y36(s.n),l.Y36(g.Y),l.Y36(m.i),l.Y36(p.v),l.Y36(d.Kf))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-librarian-login"]],decls:27,vars:2,consts:[[1,"form-signin"],[3,"formGroup","ngSubmit"],["src","/assets/media/pic/library_logo.png","alt","","width","120","height","120",1,"mb-4"],[1,"h3","mb-3","fw-normal"],[1,"form-floating"],["type","text","id","floatingInput","formControlName","username","placeholder","User Name",1,"form-control"],["for","floatingInput"],["type","password","id","floatingPassword","formControlName","password","placeholder","Password",1,"form-control"],["for","floatingPassword"],["id","roleSelect","aria-label","Role","formControlName","role",1,"form-select"],["selected","","value","Librarian"],["value","Admin"],["for","floatingSelect"],[1,"checkbox","mb-3"],["type","checkbox","value","remember-me"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(l.TgZ(0,"main",0),l.TgZ(1,"form",1),l.NdJ("ngSubmit",function(){return t.libLogin()}),l._UZ(2,"img",2),l.TgZ(3,"h1",3),l._uU(4,"Lib/Admin Sign In"),l.qZA(),l.TgZ(5,"div",4),l._UZ(6,"input",5),l.TgZ(7,"label",6),l._uU(8,"User Name"),l.qZA(),l.qZA(),l.TgZ(9,"div",4),l._UZ(10,"input",7),l.TgZ(11,"label",8),l._uU(12,"Password"),l.qZA(),l.qZA(),l.TgZ(13,"div",4),l.TgZ(14,"select",9),l.TgZ(15,"option",10),l._uU(16,"Librarian"),l.qZA(),l.TgZ(17,"option",11),l._uU(18,"Admin"),l.qZA(),l.qZA(),l.TgZ(19,"label",12),l._uU(20,"Role"),l.qZA(),l.qZA(),l.TgZ(21,"div",13),l.TgZ(22,"label"),l._UZ(23,"input",14),l._uU(24," Remember me "),l.qZA(),l.qZA(),l.TgZ(25,"button",15),l._uU(26,"Sign in"),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(1),l.Q6J("formGroup",t.libLoginForm),l.xp6(24),l.Q6J("disabled",!t.libLoginForm.valid))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.EJ,r.YN,r.Kr],styles:[".form-signin[_ngcontent-%COMP%]{text-align:center;width:100%;max-width:330px;padding:15px;margin:100px auto auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .form-signin[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}#roleSelect[_ngcontent-%COMP%], .form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border-top-left-radius:0;border-top-right-radius:0}#roleSelect[_ngcontent-%COMP%]{margin-bottom:10px}"]}),e})(),u=(()=>{class e{constructor(e,t,n,i){this.logger=e,this.router=t,this.libAuthService=n,this.fb=i,this.libUpdateForm=this.fb.group({})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(d.Kf),l.Y36(o.F0),l.Y36(s.n),l.Y36(r.qu))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-lib-update"]],decls:2,vars:0,template:function(e,t){1&e&&(l.TgZ(0,"p"),l._uU(1,"lib-update works!"),l.qZA())},styles:[""]}),e})();var h=n(1729);let b=(()=>{class e{constructor(e,t,n,i,o){this.commonService=e,this.tokenService=t,this.libAuthService=n,this.logger=i,this.router=o,this.titleName="Anlu Biblio",this.libName="Librarian"}ngOnInit(){this.commonService.usernameUpdate.subscribe(e=>{this.libName=e})}logout(){const e=this.libAuthService.getLibID();this.libAuthService.signOut().subscribe(t=>{t==e?(this.tokenService.clearToken(),this.logger.info(`Current librarian ${t} has logged out.`),this.router.navigateByUrl("/lib/login")):(this.logger.warn("Something happen in server, librarian logout failed"),window.alert("Logout failed, please try again later"))})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(p.v),l.Y36(m.i),l.Y36(s.n),l.Y36(d.Kf),l.Y36(o.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-librarian-header"]],decls:60,vars:2,consts:[["id","lib-header"],["aria-label","Main navigation",1,"navbar","navbar-expand-lg","sticky-top","navbar-dark","bg-dark"],[1,"container-fluid"],["href","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","aria-label","Toggle navigation","data-bs-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"navbar-collapse","collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","href","/lib/lib-portal",1,"nav-link","active"],[1,"nav-item","dropdown"],["href","/book","id","dropdown01","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","dropdown01",1,"dropdown-menu"],["href","/book/dashboard",1,"dropdown-item"],["href","/book/register",1,"dropdown-item"],["href","/book/update",1,"dropdown-item"],["href","/workshop","id","dropdown02","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","dropdown02",1,"dropdown-menu"],["href","/workshop",1,"dropdown-item"],["href","/workshop/create",1,"dropdown-item"],["href","/workshop/update",1,"dropdown-item"],["href","/blog","id","dropdown03","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","dropdown03",1,"dropdown-menu"],["href","/blog",1,"dropdown-item"],["href","/blog/create",1,"dropdown-item"],["href","/blog/update",1,"dropdown-item"],[1,"nav-link",3,"click"],[1,"d-flex"],[1,"label_welcome"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"nav",1),l.TgZ(2,"div",2),l.TgZ(3,"a",3),l._uU(4),l.qZA(),l.TgZ(5,"button",4),l._UZ(6,"span",5),l.qZA(),l.TgZ(7,"div",6),l.TgZ(8,"ul",7),l.TgZ(9,"li",8),l.TgZ(10,"a",9),l._uU(11,"Librarian Dashboard"),l.qZA(),l.qZA(),l.TgZ(12,"li",10),l.TgZ(13,"a",11),l._uU(14,"Manage Book"),l.qZA(),l.TgZ(15,"ul",12),l.TgZ(16,"li"),l.TgZ(17,"a",13),l._uU(18,"Dashboard"),l.qZA(),l.qZA(),l.TgZ(19,"li"),l.TgZ(20,"a",14),l._uU(21,"Register Book"),l.qZA(),l.qZA(),l.TgZ(22,"li"),l.TgZ(23,"a",15),l._uU(24,"Update Book Info"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(25,"li",10),l.TgZ(26,"a",16),l._uU(27,"Manage Workshop"),l.qZA(),l.TgZ(28,"ul",17),l.TgZ(29,"li"),l.TgZ(30,"a",18),l._uU(31,"Summary"),l.qZA(),l.qZA(),l.TgZ(32,"li"),l.TgZ(33,"a",19),l._uU(34,"Create Workshop"),l.qZA(),l.qZA(),l.TgZ(35,"li"),l.TgZ(36,"a",20),l._uU(37,"Update Workshop"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(38,"li",10),l.TgZ(39,"a",21),l._uU(40,"Manage Blog"),l.qZA(),l.TgZ(41,"ul",22),l.TgZ(42,"li"),l.TgZ(43,"a",23),l._uU(44,"Summary"),l.qZA(),l.qZA(),l.TgZ(45,"li"),l.TgZ(46,"a",24),l._uU(47,"Create Blog"),l.qZA(),l.qZA(),l.TgZ(48,"li"),l.TgZ(49,"a",25),l._uU(50,"Update Blog"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(51,"li",8),l.TgZ(52,"a",26),l.NdJ("click",function(){return t.logout()}),l._uU(53,"Logout"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(54,"form",27),l.TgZ(55,"label",28),l._uU(56),l.qZA(),l._UZ(57,"input",29),l.TgZ(58,"button",30),l._uU(59,"Search"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(4),l.Oqu(t.titleName),l.xp6(52),l.hij("Welcome! ",t.libName,""))},directives:[r._Y,r.JL],styles:["@media (max-width: 991px){.nav[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;color:#ffffffbf;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}a.nav-link[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;font-size:.8rem;color:#6c757d}.nav-link[_ngcontent-%COMP%]:hover{color:#007bff}.nav-underline[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{font-weight:500;color:#343a40}.label_welcome[_ngcontent-%COMP%]{margin-top:.25em;margin-right:.5em;font-size:.9em;text-align:center}}label.label_welcome[_ngcontent-%COMP%]{color:#fff;margin-top:.25px;margin-right:.5px;font-size:1.1em;text-align:center}"]}),e})();var f=n(9856);let A=(()=>{class e{constructor(e,t){this.tokenService=e,this.commonService=t}ngOnInit(){const e=this.tokenService.getUsername().slice(3);e&&this.commonService.setSubject(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(m.i),l.Y36(p.v))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-librarian-portal"]],decls:48,vars:0,consts:[[1,"lib-portal","container-fluid"],[1,"row","overflow-hidden"],[1,"pt-1","pt-md-3","col-md-6"],[1,"area-block","mx-1","mx-md-3","p-3","p-md-5","bg-light"],[1,"title"],[1,"blog-item"],["href","#",1,"blog-link"]],template:function(e,t){1&e&&(l._UZ(0,"app-librarian-header"),l.TgZ(1,"div",0),l.TgZ(2,"div",1),l.TgZ(3,"div",2),l.TgZ(4,"div",3),l.TgZ(5,"h2",4),l._uU(6,"Book Inventory & Summary"),l.qZA(),l.TgZ(7,"UL"),l.TgZ(8,"li",5),l.TgZ(9,"a",6),l._uU(10,"Item 1........"),l.qZA(),l.qZA(),l.TgZ(11,"li",5),l.TgZ(12,"a",6),l._uU(13,"Item 2........"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(14,"div",2),l.TgZ(15,"div",3),l.TgZ(16,"h2",4),l._uU(17,"Reader Summary & Analysis"),l.qZA(),l.TgZ(18,"UL"),l.TgZ(19,"li",5),l.TgZ(20,"a",6),l._uU(21,"Item 1........"),l.qZA(),l.qZA(),l.TgZ(22,"li",5),l.TgZ(23,"a",6),l._uU(24,"Item 2........"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(25,"div",2),l.TgZ(26,"div",3),l.TgZ(27,"h2",4),l._uU(28,"Top 10 Books (popular score)"),l.qZA(),l.TgZ(29,"UL"),l.TgZ(30,"li",5),l.TgZ(31,"a",6),l._uU(32,"Item 1........"),l.qZA(),l.qZA(),l.TgZ(33,"li",5),l.TgZ(34,"a",6),l._uU(35,"Item 2........"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(36,"div",2),l.TgZ(37,"div",3),l.TgZ(38,"h2",4),l._uU(39,"Top 10 Readers (read score)"),l.qZA(),l.TgZ(40,"UL"),l.TgZ(41,"li",5),l.TgZ(42,"a",6),l._uU(43,"Item 1........"),l.qZA(),l.qZA(),l.TgZ(44,"li",5),l.TgZ(45,"a",6),l._uU(46,"Item 2........"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(47,"app-site-footer"))},directives:[b,f.f],styles:[""]}),e})(),v=(()=>{class e{constructor(e,t,n,i,o){this.commonService=e,this.logger=t,this.libAuthService=n,this.tokenService=i,this.router=o,this.titleName="Anlu Biblio",this.adminName="Admin"}ngOnInit(){this.commonService.usernameUpdate.subscribe(e=>{this.adminName=e})}logout(){const e=this.libAuthService.getLibID();this.libAuthService.signOut().subscribe(t=>{t==e?(this.tokenService.clearToken(),this.logger.info(`Current admin ${t} has logged out.`),this.router.navigateByUrl("/lib/login")):(this.logger.warn("Something happen in server, admin logout failed"),window.alert("Logout failed, please try again later"))})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(p.v),l.Y36(d.Kf),l.Y36(s.n),l.Y36(m.i),l.Y36(o.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-admin-header"]],decls:57,vars:2,consts:[["id","lib-header"],["aria-label","Main navigation",1,"navbar","navbar-expand-lg","sticky-top","navbar-dark","bg-dark"],[1,"container-fluid"],["href","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","aria-label","Toggle navigation","data-bs-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"navbar-collapse","collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","href","/lib/lib-portal",1,"nav-link","active"],[1,"nav-item","dropdown"],["href","/book","id","dropdown01","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","dropdown01",1,"dropdown-menu"],["href","/lib/register",1,"dropdown-item"],["href","/lib/account-manage",1,"dropdown-item"],["href","/reader/account-manage",1,"dropdown-item"],["href","/book","id","dropdown02","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","dropdown02",1,"dropdown-menu"],["href","/book/dashboard",1,"dropdown-item"],["href","/book/register",1,"dropdown-item"],["href","/book/update",1,"dropdown-item"],["href","/operationlog","id","dropdown03","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","dropdown03",1,"dropdown-menu"],["href","/operationlog/review",1,"dropdown-item"],["href","/operationlog",1,"dropdown-item"],[1,"nav-link",3,"click"],[1,"d-flex"],[1,"label_welcome"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"nav",1),l.TgZ(2,"div",2),l.TgZ(3,"a",3),l._uU(4),l.qZA(),l.TgZ(5,"button",4),l._UZ(6,"span",5),l.qZA(),l.TgZ(7,"div",6),l.TgZ(8,"ul",7),l.TgZ(9,"li",8),l.TgZ(10,"a",9),l._uU(11,"Admin Dashboard"),l.qZA(),l.qZA(),l.TgZ(12,"li",10),l.TgZ(13,"a",11),l._uU(14,"Manage Account"),l.qZA(),l.TgZ(15,"ul",12),l.TgZ(16,"li"),l.TgZ(17,"a",13),l._uU(18,"Register Lib/Admin"),l.qZA(),l.qZA(),l.TgZ(19,"li"),l.TgZ(20,"a",14),l._uU(21,"Manage Lib/Admin"),l.qZA(),l.qZA(),l.TgZ(22,"li"),l.TgZ(23,"a",15),l._uU(24,"Manage Reader"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(25,"li",10),l.TgZ(26,"a",16),l._uU(27,"Manage Inventory"),l.qZA(),l.TgZ(28,"ul",17),l.TgZ(29,"li"),l.TgZ(30,"a",18),l._uU(31,"Book Dashboard"),l.qZA(),l.qZA(),l.TgZ(32,"li"),l.TgZ(33,"a",19),l._uU(34,"Register Book"),l.qZA(),l.qZA(),l.TgZ(35,"li"),l.TgZ(36,"a",20),l._uU(37,"Update Book"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(38,"li",10),l.TgZ(39,"a",21),l._uU(40,"Manage Log"),l.qZA(),l.TgZ(41,"ul",22),l.TgZ(42,"li"),l.TgZ(43,"a",23),l._uU(44,"Operation Log Review"),l.qZA(),l.qZA(),l.TgZ(45,"li"),l.TgZ(46,"a",24),l._uU(47,"Log Setting"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(48,"li",8),l.TgZ(49,"a",25),l.NdJ("click",function(){return t.logout()}),l._uU(50,"Logout"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(51,"form",26),l.TgZ(52,"label",27),l._uU(53),l.qZA(),l._UZ(54,"input",28),l.TgZ(55,"button",29),l._uU(56,"Search"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(4),l.Oqu(t.titleName),l.xp6(49),l.hij("Welcome! ",t.adminName,""))},directives:[r._Y,r.JL],styles:["@media (max-width: 991px){.nav[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;color:#ffffffbf;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}a.nav-link[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;font-size:.8rem;color:#6c757d}.nav-link[_ngcontent-%COMP%]:hover{color:#007bff}.nav-underline[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{font-weight:500;color:#343a40}.label_welcome[_ngcontent-%COMP%]{margin-top:.25em;margin-right:.5em;font-size:.9em;text-align:center}}label.label_welcome[_ngcontent-%COMP%]{color:#fff;margin-top:.25px;margin-right:.5px;font-size:1.1em;text-align:center}"]}),e})();const T=[{path:"",children:[{path:"login",component:Z},{path:"register",canActivate:[h.O],component:c},{path:"update/:id",canActivate:[h.O],component:u},{path:"admin-portal",canActivate:[h.O],component:(()=>{class e{constructor(e,t){this.commonService=e,this.tokenService=t}ngOnInit(){const e=this.tokenService.getUsername().slice(3);e&&this.commonService.setSubject(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(p.v),l.Y36(m.i))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-admin-portal"]],decls:48,vars:0,consts:[[1,"lib-portal","container-fluid"],[1,"row","overflow-hidden"],[1,"pt-1","pt-md-3","col-md-6"],[1,"area-block","mx-1","mx-md-3","p-3","p-md-5","bg-light"],[1,"title"],[1,"blog-item"],["href","#",1,"blog-link"]],template:function(e,t){1&e&&(l._UZ(0,"app-admin-header"),l.TgZ(1,"div",0),l.TgZ(2,"div",1),l.TgZ(3,"div",2),l.TgZ(4,"div",3),l.TgZ(5,"h2",4),l._uU(6,"Book Inventory & Summary"),l.qZA(),l.TgZ(7,"UL"),l.TgZ(8,"li",5),l.TgZ(9,"a",6),l._uU(10,"Item 1........"),l.qZA(),l.qZA(),l.TgZ(11,"li",5),l.TgZ(12,"a",6),l._uU(13,"Item 2........"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(14,"div",2),l.TgZ(15,"div",3),l.TgZ(16,"h2",4),l._uU(17,"Reader Summary & Analysis"),l.qZA(),l.TgZ(18,"UL"),l.TgZ(19,"li",5),l.TgZ(20,"a",6),l._uU(21,"Item 1........"),l.qZA(),l.qZA(),l.TgZ(22,"li",5),l.TgZ(23,"a",6),l._uU(24,"Item 2........"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(25,"div",2),l.TgZ(26,"div",3),l.TgZ(27,"h2",4),l._uU(28,"Top 10 Books (popular score)"),l.qZA(),l.TgZ(29,"UL"),l.TgZ(30,"li",5),l.TgZ(31,"a",6),l._uU(32,"Item 1........"),l.qZA(),l.qZA(),l.TgZ(33,"li",5),l.TgZ(34,"a",6),l._uU(35,"Item 2........"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(36,"div",2),l.TgZ(37,"div",3),l.TgZ(38,"h2",4),l._uU(39,"Top 10 Readers (read score)"),l.qZA(),l.TgZ(40,"UL"),l.TgZ(41,"li",5),l.TgZ(42,"a",6),l._uU(43,"Item 1........"),l.qZA(),l.qZA(),l.TgZ(44,"li",5),l.TgZ(45,"a",6),l._uU(46,"Item 2........"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(47,"app-site-footer"))},directives:[v,f.f],styles:[""]}),e})()},{path:"lib-portal",canActivate:[a.$],component:A},{path:"account-manage",canActivate:[h.O],component:(()=>{class e{constructor(e,t,n){this.libAuthService=e,this.logger=t,this.tokenService=n,this.libDelete=()=>{if(window.confirm("Do you relly want to delete this account?")){const e=window.event.target,t=e.parentElement.parentElement.querySelector("p.id").innerHTML;this.libAuthService.deleteLib(t).subscribe(n=>{console.log(n),n?(e.parentElement.parentElement.querySelector("p.status").innerHTML="Deleted",e.style.visibility="hidden",this.logger.info(`Success delete the lib ${t}`)):this.logger.warn("Server delete lib failed")})}}}ngOnInit(){let e,t,n=this.tokenService.getUsername().slice(3);this.libAuthService.getAllAdmin().subscribe(t=>{if(t&&t.length>0){e=[].concat(t);const i=document.querySelector("div.admin-block");if(i){for(const t of e){let e=document.createElement("div");e.className="row",i.appendChild(e);let o=document.createElement("div");o.className="col-md-2";let a=document.createElement("p");a.className="col-content",a.innerHTML=t._id,o.appendChild(a),e.appendChild(o);let r=document.createElement("div");r.className="col-md-2";let l=document.createElement("p");l.className="col-content",l.innerHTML=t.username,r.appendChild(l),e.appendChild(r);let d=document.createElement("div");d.className="col-md-2";let s=document.createElement("p");s.className="col-content",s.innerHTML=t.registerDate.toLocaleString().slice(0,10),d.appendChild(s),e.appendChild(d);let c=document.createElement("div");c.className="col-md-1";let g=document.createElement("p");g.className="col-content",g.innerHTML=t.isActive?"True":"False",c.appendChild(g),e.appendChild(c);let m=document.createElement("div");m.className="col-md-2";let p=document.createElement("a");p.className="col-content",p.href=`/lib/profile/${t._id}`,p.innerHTML="Review Profile",m.appendChild(p),e.appendChild(m);let Z=document.createElement("div");Z.className="col-md-2";let u=document.createElement("a");if(u.className="col-content",u.href=`/lib/update/${t._id}`,u.innerHTML="Update Profile",Z.appendChild(u),e.appendChild(Z),t.username!==n&&"admin"!==t.username.toLowerCase()){let n=document.createElement("div");n.className="col-md-1";let i=document.createElement("a");i.className="col-content delete-link",i.addEventListener("click",this.libDelete.bind(t._id)),i.innerHTML="Delete",n.appendChild(i),e.appendChild(n)}}this.logger.info("Success generate admin account management block")}else this.logger.warn("Can not find div.admin-block object in webpage")}}),this.libAuthService.getAllLib().subscribe(e=>{if(e&&e.length>0){t=[].concat(e);const n=document.querySelector("div.lib-block");if(n){for(const e of t){let t=document.createElement("div");t.className="row",n.appendChild(t);let i=document.createElement("div");i.className="col-md-2";let o=document.createElement("p");o.className="col-content id",o.innerHTML=e._id,i.appendChild(o),t.appendChild(i);let a=document.createElement("div");a.className="col-md-2";let r=document.createElement("p");r.className="col-content",r.innerHTML=e.username,a.appendChild(r),t.appendChild(a);let l=document.createElement("div");l.className="col-md-2";let d=document.createElement("p");d.className="col-content",d.innerHTML=e.registerDate.toLocaleString().slice(0,10),l.appendChild(d),t.appendChild(l);let s=document.createElement("div");s.className="col-md-1";let c=document.createElement("p");c.className="col-content status",c.innerHTML=e.isActive?"Active":"Inactive",s.appendChild(c),t.appendChild(s);let g=document.createElement("div");g.className="col-md-2";let m=document.createElement("a");m.className="col-content",m.href=`/lib/profile/${e._id}`,m.innerHTML="Review Profile",g.appendChild(m),t.appendChild(g);let p=document.createElement("div");p.className="col-md-2";let Z=document.createElement("a");Z.className="col-content",Z.href=`/lib/update/${e._id}`,Z.innerHTML="Update Profile",p.appendChild(Z),t.appendChild(p);let u=document.createElement("div");u.className="col-md-1";let h=document.createElement("a");h.className="col-content delete-link",h.addEventListener("click",this.libDelete),h.innerHTML="Delete",u.appendChild(h),t.appendChild(u)}this.logger.info("Success generate librarian account management block")}else this.logger.warn("Can not find div.lib-block object in webpage")}})}ngOnDestroy(){const e=document.querySelectorAll("a.delete-link");if(e&&e.length>0)for(let t=0;t<e.length;t++)e[t].replaceWith(e[t].cloneNode(!0));this.logger.info("Success cleaned all eventListeners added by account-manage component")}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(s.n),l.Y36(d.Kf),l.Y36(m.i))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-account-manage"]],decls:46,vars:0,consts:[[1,"container-fluid","account-manage"],[1,"title","padding","text-center"],[1,"admin-block"],[1,"block-title","padding"],[1,"row"],[1,"col-md-2"],[1,"col-title"],[1,"col-md-1"],[1,"col-md-5"],[1,"lib-block"],[1,"home-link"],["href","/lib/admin-portal",1,"btn","btn-primary"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"h2",1),l._uU(2,"Existing Admin & Librarian Account Management"),l.qZA(),l.TgZ(3,"div",2),l.TgZ(4,"h3",3),l._uU(5,"Admin"),l.qZA(),l._UZ(6,"hr"),l.TgZ(7,"div",4),l.TgZ(8,"div",5),l.TgZ(9,"p",6),l._uU(10,"ID"),l.qZA(),l.qZA(),l.TgZ(11,"div",5),l.TgZ(12,"p",6),l._uU(13,"Username"),l.qZA(),l.qZA(),l.TgZ(14,"div",5),l.TgZ(15,"p",6),l._uU(16,"Create Date"),l.qZA(),l.qZA(),l.TgZ(17,"div",7),l.TgZ(18,"p",6),l._uU(19,"Status"),l.qZA(),l.qZA(),l.TgZ(20,"div",8),l.TgZ(21,"p",6),l._uU(22,"Operation"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(23,"div",9),l.TgZ(24,"h3",3),l._uU(25,"Librarian"),l.qZA(),l._UZ(26,"hr"),l.TgZ(27,"div",4),l.TgZ(28,"div",5),l.TgZ(29,"p",6),l._uU(30,"ID"),l.qZA(),l.qZA(),l.TgZ(31,"div",5),l.TgZ(32,"p",6),l._uU(33,"Username"),l.qZA(),l.qZA(),l.TgZ(34,"div",5),l.TgZ(35,"p",6),l._uU(36,"Create Date"),l.qZA(),l.qZA(),l.TgZ(37,"div",7),l.TgZ(38,"p",6),l._uU(39,"Status"),l.qZA(),l.qZA(),l.TgZ(40,"div",8),l.TgZ(41,"p",6),l._uU(42,"Operation"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(43,"div",10),l.TgZ(44,"a",11),l._uU(45,"Return Admin Portal"),l.qZA(),l.qZA(),l.qZA())},styles:["div.account-manage[_ngcontent-%COMP%]{padding:3%}h2.title[_ngcontent-%COMP%]{font-size:xx-large;font-family:Georgia,Times New Roman,Times,serif;margin-top:2%;margin-bottom:3%}h3.block-title[_ngcontent-%COMP%]{font-size:large;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif;margin-top:3%;margin-bottom:1%}p.col-title[_ngcontent-%COMP%]{font-size:medium;font-family:Arial,Helvetica,sans-serif;font-weight:700}div.home-link[_ngcontent-%COMP%]{float:right;font-size:medium;margin-top:50px;margin-right:30px;padding:10px}"]}),e})()},{path:"profile/:id",canActivate:[h.O],component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-lib-profile"]],decls:2,vars:0,template:function(e,t){1&e&&(l.TgZ(0,"p"),l._uU(1,"lib-profile works!"),l.qZA())},styles:[""]}),e})()},{path:"",redirectTo:"lib-portal",pathMatch:"full"}]}];let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[o.Bz.forChild(T)],o.Bz]}),e})();var _=n(7841);let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.ez,r.UX,_.G,q]]}),e})()}}]);